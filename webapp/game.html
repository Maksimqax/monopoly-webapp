<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  <title>Монополия — ход</title>
  <style>
    :root{
      --bg:#0b1219;
      --panel:#111c26;
      --text:#e9f2fb;
      --muted:#a2b0bd;
      --accent:#3cc3ff;
      --cell:#132433;
      --cell2:#0f1f2c;
      --gap:6px;
      --token: clamp(14px, 2.2vw, 22px);
    }

    /* убиваем любые скроллы */
    html,body{margin:0;height:100%;overflow:hidden;background:var(--bg);color:var(--text);}
    body{font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}

    /* весь экран фиксируем – Telegram WebApp иногда добавляет лишний отступ */
    .screen{
      position:fixed; inset:0;
      display:flex; flex-direction:column; gap:8px;
      padding:10px; overflow:hidden;
    }

    header{
      display:flex; justify-content:space-between; align-items:center;
      background:var(--panel); border-radius:14px; padding:8px 12px;
    }
    .title{font-weight:700}
    .muted{color:var(--muted); font-size:12px}

    .wrap{
      flex:1; min-height:0; display:grid;
      grid-template-rows: 1fr auto; gap:8px; overflow:hidden;
    }

    .board-wrap{
      background:var(--panel); border-radius:16px; padding:10px;
      display:grid; place-items:center; overflow:hidden; min-height:0;
    }

    /* Квадратная доска. Вписываем без скролла */
    .board{
      aspect-ratio:1/1;
      width: min(96vw, calc(100dvh - 184px));  /* 184px ≈ высота: хедер + панель + отступы */
      max-width: 96vw;
      background:linear-gradient(180deg,var(--cell2),var(--cell));
      border-radius:12px;
      display:grid;
      grid-template-columns: repeat(11, 1fr);
      grid-template-rows: repeat(11, 1fr);
      gap: var(--gap);
      padding: var(--gap);
      position:relative;
      overflow:hidden;
    }
    .cell{
      background:#0f1a23; border-radius:8px;
      display:flex; align-items:center; justify-content:center;
      color:#8da0b1; font-size: clamp(9px,1.8vw,13px);
      position:relative; overflow:hidden;
    }
    .edge{background:#102131}
    .center{background:transparent; outline:2px dashed #1d3041; outline-offset:-6px}

    .idx{
      position:absolute; bottom:4px; right:6px; opacity:.75;
      font-size:10px; color:#71869a; user-select:none;
    }

    .token{
      width:var(--token); height:var(--token);
      border-radius:50%; outline:2px solid rgba(255,255,255,.18);
      box-shadow:0 2px 6px rgba(0,0,0,.35);
    }
    .t-red{background:#ff4d4f}
    .t-yellow{background:#ffd34d}
    .t-blue{background:#4da6ff}
    .t-green{background:#34d39b}
    .t-purple{background:#b379ff}

    .panel{
      background:var(--panel); border-radius:16px; padding:10px;
      display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:center;
    }
    .dice{color:#91a2b2; font-size:14px}
    .btns{display:flex; gap:8px}
    button{
      appearance:none; border:0; border-radius:12px; padding:10px 14px;
      background:#163043; color:#eaf4ff; font-weight:700;
    }
    .primary{background:var(--accent); color:#002233}
    button:disabled{opacity:.5}

    /* телеграм расширение (не критично, но помогает) */
    body.twa { padding-bottom: env(safe-area-inset-bottom); }
  </style>
</head>
<body>
<div class="screen">
  <header>
    <div>
      <div class="title">Монополия — ход</div>
      <div id="roomInfo" class="muted">Комната —</div>
    </div>
    <div id="turnInfo" class="muted">Ходит: —</div>
  </header>

  <div class="wrap">
    <div class="board-wrap">
      <div id="board" class="board"></div>
    </div>

    <div class="panel">
      <div id="diceLabel" class="dice">Брось кубики</div>
      <div class="btns">
        <button id="rollBtn" class="primary">Бросить кубики</button>
        <button id="endBtn">Закончить ход</button>
      </div>
    </div>
  </div>
</div>

<script>
  // чуть помогаем Telegram WebApp
  try { if (window.Telegram?.WebApp) { Telegram.WebApp.expand(); document.body.classList.add('twa'); } } catch(e){}
</script>
<script src="./game.js" defer></script>
</body>
</html>
